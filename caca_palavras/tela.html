<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Caça-palavras</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="../plugins/bootstrap-5.0.2/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="../plugins/bootstrap-5.0.2/js/bootstrap.bundle.min.js"></script>	
</head>
<body>

<main>
<div id="iniciar" class="mt-3 mb-3 p-1 col-xl-6 col-lg-6 col-md-10 col-sm-10 col-lg-10 text-center justify-content-center text-center" allign="center">
	<div class="mt-3 mb-3 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 text-white text-center">
		<span style="font-size: 30px;"><strong>Caça-palavras</strong></span>
		<br>
		<span  style="font-size: 20px;"><strong><i>Feito para o meu Amor</i></strong></span>		
		<button class="mt-3 btn_semi_redondo_menor contratar" id="btnPlay">
			Jogar
		</button>
	</div>
</div>
<div id="jogo" hidden>		
	<span style="font-size: 30px; text-shadow: 2px 2px 2px #ffffff, -2px 2px  2px #ffffff, 2px -2px  2px #ffffff, -2px -2px  2px #ffffff;"><strong>Caça-palavras</strong></span>	
	<div class="mt-3 mb-3 p-2 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
		<ol id="dicas">			
			<div class="justify-content-center mt-3 pb-4 col-xl-11 col-lg-11 col-md-11 col-sm-11 col-11" allign="center">
				<div class="text-center">
					<span style="font-size: 20px;"><strong>Como jogar:</strong></span>
				</div>
				<div class="text-justify">
					Ao encontrar uma palavra, como por exemplo <b>"AMOR"</b> clique na primeira letra<b> (A) </b>e na ultima letra <b>(R)</b>, você pode selecionar ao contrário também da ultima letra para a primeira, após isso palavra ficará <span style=" background-color: lightblue;"><b>selecionada</b></span>;
					<br>
					<br>
					<span style="font-size: 15px;"><b>Caso:</b></span>
					<br>
					- A palavra selecionada fique com o fundo <span style="background-color: #009688;"><b>verde</b></span>, você encontrou uma das palavras! <br>
					- Se não, se as letras piscarem em <span style="color:red"><b>vermelho</b></span>, você pode ter selecionado errado, ou não é a palavra.
					<br>
					<br>
					<span style="font-size: 15px;"><b>Como encontrar as palavras:</b></span>
					<br>
					- As palavras serão encontradas apenas na vertical <strong>( | )</strong> ou na Horizontal <strong>( — )</strong>										
				</div>				
				<hr style="margin-bottom: 1%;"/>
				<div class="text-center">
					<span style="font-size: 20px;"><strong>Dica</strong></span>
				</div>
				<li>Descubra palavras que representam <b>qualidades especiais</b> que admiro em você</li>
	
			</div>
		</ol>
	</div>
	<table id="tabuleiro" align="center">
		<tr>
			<td>C</td><td>O</td><td>M</td><td>U</td><td>N</td><td>I</td><td>C</td><td>A</td><td>T</td><td>I</td><td>V</td><td>A</td>
		</tr>
		<tr>
			<td>A</td><td>B</td><td>C</td><td>Y</td><td>E</td><td>O</td><td>M</td><td>P</td><td>M</td><td>S</td><td>E</td><td>O</td>
		</tr>
		<tr>
			<td>R</td><td>R</td><td>O</td><td>I</td><td>S</td><td>D</td><td>A</td><td>A</td><td>Y</td><td>H</td><td>C</td><td>C</td>
		</tr>
		<tr>
			<td>I</td><td>I</td><td>N</td><td>S</td><td>P</td><td>I</td><td>R</td><td>A</td><td>D</td><td>O</td><td>R</td><td>A</td>
		</tr>
		<tr>
			<td>N</td><td>L</td><td>F</td><td>I</td><td>O</td><td>V</td><td>A</td><td>O</td><td>S</td><td>D</td><td>I</td><td>T</td>
		</tr>
		<tr>
			<td>H</td><td>H</td><td>I</td><td>A</td><td>N</td><td>E</td><td>V</td><td>D</td><td>S</td><td>G</td><td>A</td><td>I</td>
		</tr>
		<tr>
			<td>O</td><td>A</td><td>Á</td><td>T</td><td>T</td><td>R</td><td>I</td><td>H</td><td>E</td><td>O</td><td>T</td><td>V</td>
		</tr>
		<tr>
			<td>S</td><td>N</td><td>V</td><td>H</td><td>Â</td><td>T</td><td>L</td><td>R</td><td>I</td><td>S</td><td>I</td><td>A</td>
		</tr>
		<tr>
			<td>A</td><td>T</td><td>E</td><td>G</td><td>N</td><td>I</td><td>H</td><td>W</td><td>T</td><td>T</td><td>V</td><td>N</td>
		</tr>
		<tr>
			<td>D</td><td>E</td><td>L</td><td>A</td><td>E</td><td>D</td><td>O</td><td>N</td><td>T</td><td>O</td><td>A</td><td>T</td>
		</tr>
		<tr>
			<td>E</td><td>E</td><td>G</td><td>D</td><td>A</td><td>A</td><td>S</td><td>A</td><td>W</td><td>S</td><td>U</td><td>E</td>
		</tr>
		<tr>
			<td>E</td><td>R</td><td>S</td><td>I</td><td>E</td><td>R</td><td>A</td><td>N</td><td>T</td><td>A</td><td>D</td><td>O</td>
		</tr>
		
		<p id="encontradas" style="font-size: 20px; font-weight: 600; text-shadow: 2px 2px 2px #ffffff, -2px 2px  2px #ffffff, 2px -2px  2px #ffffff, -2px -2px  2px #ffffff;"></p>
	<button class="mt-3 mb-3 btn_semi_redondo_menor contratar" hidden id="btnVoltar" onclick="javascript:modalPremios();">Clique Aqui</button>	
</div>
</main>
 <!-- MODAL PRÊMIOS -->
 <div class="modal fade" data-bs-backdrop="static" id="modalPremios" tabindex="1" role="dialog" aria-labelledby="modalPremios" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-md" role="document">
	  <div class="modal-content" style="border-radius: 20px;">
		  <div class="modal-body">							
			  <div class="card-deck">
				  <div class="">
					  <div class="">                              								
						  <div class="card-body tab-pane active" id="card_mp">                                							
							<div class="mt-3" style="font-weight: 400; font-size: 18px;">										    
								<i>
									<p>"Em cada traço da sua existência, vejo uma alma <b>brilhante</b>, capaz de iluminar os dias mais sombrios. Sua <b>carinhosa</b> presença envolve meu coração, criando laços que resistem ao tempo. Sua capacidade <b>comunicativa</b> é uma forma <b>cativante</b> de se expressar que vai além das palavras humanas.</p>									
									<p>Você é uma âncora <b>confiável</b> em tempos de tempestade, um farol que guia através das incertezas da vida. Sua mente <b>criativa</b> é um universo em expansão, onde as ideias dançam livres e se transformam em algo extraordinário.</p>									
								    <p>Cada momento com você é uma jornada, uma aventura na qual a <b>espontaneidade</b> e a autenticidade se entrelaçam, transformando o ordinário em algo mágico e especial. Você é <b>divertida</b> de uma forma que nunca deixarei de sorrir para você.</p>									
								    <p>É como um banquete para a alma, deslizar a mão pelo seu corpo, e sentir cada vez mais a <b>gostosa</b> sensação que criamos juntos.</p>									
									<p>Você é uma fonte de <b>inspiração</b>, uma força que impulsiona os sonhos e os torna realidade. Sua presença é verdadeiramente <b>maravilhosa</b>, um presente para este mundo, e para mim."</p>
									<div align="right">										    
										<p><b>~ Amor da sua vida</b></p>  
									</div>
								</i>
							</div>	
							<div class="mt-3" align="right">										    
								<button type="button" class="btn_semi_redondo_menor contratar" data-bs-dismiss="modal">Fechar</button>										    
							</div>																														
						  </div>
					  </div>
				  </div>
			  </div>
		  </div>				       
	  </div>
  </div>
</div> 
<script>
		var t = document.getElementById("tabuleiro");
		var palavras, primeiroclique, encontradas, data;
		function clique(e){
			if(palavras.length > 0){
				if(primeiroclique == false){
					data.colunainicial = parseInt(e.target.dataset.index);
					data.linhainicial = parseInt(e.target.parentElement.dataset.index);
					data.letrainicial = e.target.innerText;
					
					if(e.target.dataset.encontrada == "true"){
						e.target.classList.replace("encontrada", "selecionada");
					}else{
						e.target.classList.add("selecionada");
					}
					
					primeiroclique = true;
				}else{
					if(data.colunainicial != parseInt(e.target.dataset.index) && data.linhainicial != parseInt(e.target.parentElement.dataset.index)){
						return;
					}
					
					data.colunafinal = parseInt(e.target.dataset.index);
					data.linhafinal = parseInt(e.target.parentElement.dataset.index);
					data.letrafinal = e.target.innerText;
					
					if(data.colunainicial > data.colunafinal){
						var novacolunainicial = data.colunafinal;
						var novacolunafinal = data.colunainicial;
						data.colunainicial = novacolunainicial;
						data.colunafinal = novacolunafinal;
					}
					if(data.linhainicial > data.linhafinal){
						var novalinhainicial = data.linhafinal;
						var novalinhafinal = data.linhainicial;
						data.linhainicial = novalinhainicial;
						data.linhafinal = novalinhafinal;
					}
					
					primeiroclique = false;
					
					if(e.target.dataset.encontrada == "true"){
						e.target.classList.replace("encontrada", "selecionada");
					}else{
						e.target.classList.add("selecionada");
					}
					comparar(data);
				}
			}
		}
		function horizontal(fn){
			console.log("seleção horizontal");
			for(var i = data.colunainicial; i < data.colunafinal + 1; i++){
				var td = t.rows[data.linhainicial].cells[i];
				if(td.dataset.encontrada == "true"){
					td.classList.replace("encontrada", "selecionada");
				}else{
					td.classList.add("selecionada");
				}
				fn(td);
			}
		}
		function vertical(fn){
			console.log("seleção vertical");
			for(var i = data.linhainicial; i < data.linhafinal + 1; i++){
				var td = t.rows[i].cells[data.colunainicial];
				if(td.dataset.encontrada == "true"){
					td.classList.replace("encontrada", "selecionada");
				}else{
					td.classList.add("selecionada");
				}
				fn(td);
			}
		}
		function comparar(data){
			var selecionados = {
				palavra:"",
				elementos:[]
			};
			if(data.colunainicial != data.colunafinal && data.linhainicial == data.linhafinal){
				horizontal(function(td){
					selecionados.palavra += td.innerText;
					selecionados.elementos.push(td);
				});
			}else if(data.colunainicial == data.colunafinal && data.linhainicial != data.linhafinal){
				vertical(function(td){
					selecionados.palavra += td.innerText;
					selecionados.elementos.push(td);
				});
			}
			//essa linha aqui usei um operador condicional ternário que vai retorna a palavra selecionada, se ela estiver na lista,
			//caso a palavra esteja invertida, a primeira condição vai dar falso e vai cair na segunda condicional
			//que vai inverte a palavra e verificar de novo se tem na lista, caso sim vai retorna ela, caso, não achar mesmo invertendo, vai retorna falso
			//isso é importante para palavras de cabeça para baixo no quebra cabeça
			var palavraselecionada = palavras.includes(selecionados.palavra) ? selecionados.palavra : palavras.includes(selecionados.palavra.split("").reverse().join("")) ? selecionados.palavra.split("").reverse().join('') : false;
			if(palavraselecionada){
				palavras = palavras.filter(function(p){
					if(palavraselecionada != p){
						return p;
					}
				});
				setTimeout(function(){
					for(var i = 0; i < selecionados.elementos.length; i++){
						var elemento = selecionados.elementos[i];
						elemento.classList.replace("selecionada", "encontrada");
						elemento.dataset.encontrada = "true";
					}
				}, 1000);
				encontradas += 1;
				document.getElementById("encontradas").innerText = "Encontradas: "+encontradas+"\n Restantes: "+ palavras.length;
				if(palavras.length == 0){
					setTimeout(function(){						
						document.getElementById("btnVoltar").hidden = false;
					}, 2000);
				}
				data = {};
			}else{
				data = {};
				setTimeout(function(){
					for(var i = 0; i < selecionados.elementos.length; i++){
						var elemento = selecionados.elementos[i];
						elemento.classList.replace("selecionada", "errado");
					}
					setTimeout(function(){
						for(var i = 0; i < selecionados.elementos.length; i++){
							var elemento = selecionados.elementos[i];
							if(elemento.dataset.encontrada == "true"){
								elemento.classList.replace("errado", "encontrada");
							}else{
								elemento.classList.remove("errado");
							}
						}
					}, 1000);
				}, 1000);
			}
		}
		
function iniciaJogo(){
			palavras=["COMUNICATIVA", "CARINHOSA","GOSTOSA", "CONFIÁVEL", "MARAVILHOSA", "CATIVANTE", "ESPONTÂNEA", "DIVERTIDA", "CRIATIVA","INSPIRADORA", "BRILHANTE"];
			primeiroclique = false;
			encontradas = 0;
			data = {};
			document.getElementById("encontradas").innerText = "Encontradas: "+encontradas+"\n Restantes: "+ palavras.length;
			for(var i = 0; i < t.rows.length; i++){
				t.rows[i].id = "linha " + i;
				t.rows[i].dataset.index = i;
				for(var j = 0; j < t.rows[i].cells.length; j++){
					t.rows[i].cells[j].classList = [];
					t.rows[i].cells[j].dataset.encontrada = "false";
					t.rows[i].cells[j].id = "coluna " + j;
					t.rows[i].cells[j].dataset.index = j;
					t.rows[i].cells[j].addEventListener("click", clique);
				}
			}
			document.getElementById("iniciar").hidden = true;			
			document.getElementById("jogo").hidden = false;
			document.getElementById("btnVoltar").hidden = true;
		}
		var btnPlay = document.getElementById("btnPlay");
		btnPlay.onclick = function(){
			iniciaJogo();
		}
		/*
		var btnVoltar = document.getElementById("btnVoltar");
		btnVoltar.onclick = function(){
			btnVoltar.hidden = true;
			document.getElementById("iniciar").hidden = false;			
			document.getElementById("jogo").hidden = true;
		}
		*/
		function modalPremios(){
       		$("#modalPremios").modal("show");
    	}
	</script>
</body>

</html>